<header>
    <!-- Logo inside a circle -->
    <a href="{{ '/' | relative_url }}" class="logo-container" style="text-decoration: none;">
        <img src="{{ '/assets/images/logo/ostentatious-brewing.png' | relative_url }}" alt="Ostentatious Brewing Logo"
            class="logo" />
        <h5 class="header_text">OSTENTATIOUS BREWING</h5>
    </a>

    <button class="hamburger" type="button" aria-label="Toggle menu" aria-controls="site-navigation" aria-expanded="false">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <button class="nav-overlay" type="button" onclick="toggleMenu(false)" aria-hidden="true" tabindex="-1"></button>

    <nav id="site-navigation" role="navigation" aria-label="Main Navigation">
        <ul>
            <li><a href="{{ '/' | relative_url }}">HOME</a></li>
            <li><a href="{{ '/brewery/on-tap' | relative_url }}">ON TAP</a></li>
            <li><a href="{{ '/brewery/in-production/' | relative_url }}">IN PRODUCTION</a></li>
            <li><a href="{{ '/brewery/recipe-design/' | relative_url }}">RECIPE DESIGN</a></li>
            <li><a href="{{ '/brewery/recipe-archive/' | relative_url }}">RECIPE ARCHIVE</a></li>
            <li><a href="{{ '/brew-setup.html' | relative_url }}">BREW SETUP</a></li>
            <li><a href="{{ '/cellar.html' | relative_url }}">CELLAR</a></li>
            <li><a href="https://github.com/austinshinkle" target="_blank" rel="noopener">GITHUB</a></li>
        </ul>
    </nav>
</header>

<script>
    (function () {
        const nav = document.getElementById('site-navigation');
        const btn = document.querySelector('.hamburger');
        const overlay = document.querySelector('.nav-overlay');

        function handleKeydown(e) {
            if (e.key === 'Escape') {
                toggleMenu(false);
            }
        }

        window.toggleMenu = function (open) {
            const isOpen = typeof open === 'boolean' ? open : !nav.classList.contains('nav-open');
            nav.classList.toggle('nav-open', isOpen);
            document.body.classList.toggle('menu-open', isOpen);
            btn.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
            overlay.setAttribute('aria-hidden', isOpen ? 'false' : 'true');

            if (isOpen) {
                // focus first link in nav for keyboard users
                const firstLink = nav.querySelector('a');
                if (firstLink) firstLink.focus();
                document.addEventListener('keydown', handleKeydown);
            } else {
                document.removeEventListener('keydown', handleKeydown);
                btn.focus();
            }
        };

        // Close mobile menu if screen gets resized wider
        window.addEventListener('resize', () => {
            if (window.innerWidth > 1024 && nav.classList.contains('nav-open')) {
                window.toggleMenu(false);
            }
        });

        // Toggle compact header on scroll
        const headerEl = document.querySelector('header');
        function handleScroll() {
            if (window.scrollY > 12) headerEl.classList.add('scrolled');
            else headerEl.classList.remove('scrolled');
        }

        window.addEventListener('scroll', handleScroll, { passive: true });
        // initialize state on load
        handleScroll();
    })();
</script>