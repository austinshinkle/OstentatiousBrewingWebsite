---
layout: default
---

<link rel="stylesheet" href="{{ '/assets/css/beer.css' | relative_url }}" />

<div class="back-button-container">
    <a href="javascript:history.back()" class="back-button">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            stroke-linecap="round" stroke-linejoin="round">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
        </svg>
        Back
    </a>
</div>

<div class="beer-detail-page-container">
    <div class="beer-header-container">
        <div>
            <h1>{{ page.title }}</h1>
            <h3>{{ page.style }}</h3>
            <p class="brew-date">Brewed {{ page.brew_date | date: "%B %e, %Y" }}</p>
        </div>
    </div>

    <div class="beer-detail-description">
        <p>{{ page.description }}</p>
    </div>

    <div class="logo-beer-stats-container">
        <div class="beer-detail-image-wrapper">
            <img src="{{ page.logo | relative_url }}" alt="{{ page.title }} logo" class="beer-detail-image" />
        </div>

        <div class="beer-stats-grid">
            {% assign stats = "Target OG,target_og|Actual OG,actual_og|Target FG,target_fg|Actual FG,actual_fg|Target
            ABV,target_abv|Actual ABV,actual_abv|IBU,calculated_ibu|SRM,calculated_srm" | split: "|" %}

            {% for stat in stats %}
            {% assign stat_parts = stat | split: "," %}
            {% assign label = stat_parts[0] %}
            {% assign key = stat_parts[1] %}
            <div class="beer-stat-cell">
                <span class="beer-stat-table-title">{{ label }}</span>
                <span class="beer-stat-table-value">{{ page[key] | default: "TBD" }}</span>
            </div>
            {% endfor %}
        </div>
    </div>

    <hr class="horizontal-line" />

    <section class="beer-details">
        <div class="beer-column">
            <h2 class="beer-column-section-title">Ingredients</h2>

            <h4>Malts</h4>
            <div class="ingredients-list">
                {% for malt in page.malts %}<p>{{ malt }}</p>{% endfor %}
            </div>

            <h4>Hops</h4>
            <div class="ingredients-list">
                {% for hop in page.hops %}<p>{{ hop }}</p>{% endfor %}
            </div>

            <h4>Yeast</h4>
            <div class="ingredients-list">
                {% for y in page.yeast %}<p>{{ y }}</p>{% endfor %}
            </div>
        </div>

        <div class="beer-column">
            <h2 class="beer-column-section-title">Brewing Instructions</h2>
            {% for step in page.brewing_instructions %}
            <p>{{ forloop.index }}. {{ step }}</p>
            {% endfor %}
        </div>

        <div class="beer-column">
            <h2 class="beer-column-section-title">Starter & Notes</h2>
            {% for note in page.starter_instructions %}
            <p>{{ note }}</p>
            {% endfor %}
        </div>
    </section>

    <hr class="horizontal-line" />

    <section class="fermentation-profile">
        <h2 class="section-title">Fermentation Profile</h2>
        <div class="fermentation-chart">
            <canvas id="fermentationChart" width="800" height="400"
                data-fermentation='{% if page.fermentation_profile %}{{ page.fermentation_profile | jsonify }}{% else %}[]{% endif %}'></canvas>
        </div>
    </section>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const canvas = document.getElementById('fermentationChart');
        const ctx = canvas.getContext('2d');

        let fermentationData = [];
        try {
            const rawData = JSON.parse(canvas.dataset.fermentation);
            if (Array.isArray(rawData)) {
                fermentationData = rawData.map(entry => ({ x: entry.day, y: entry.temp }));
            }
        } catch (e) {
            console.error("Error parsing fermentation data", e);
        }

        new Chart(ctx, {
            type: 'line',
            data: {
                datasets: [{
                    label: 'Temperature (°F)',
                    data: fermentationData,
                    borderColor: 'rgb(75, 192, 192)',
                    backgroundColor: 'rgba(75, 192, 192, 0.2)',
                    stepped: true,
                    fill: true
                }]
            },
            options: {
                scales: {
                    x: { type: 'linear', title: { display: true, text: 'Day' } },
                    y: { title: { display: true, text: 'Temp (°F)' } }
                }
            }
        });
    });
</script>